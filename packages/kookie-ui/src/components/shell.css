/*
  Shell Root
  - Vertical app scaffold with sticky header and flexible body
  - Avoid margins; rely on flex/grid gaps and padding tokens only
*/
.rt-ShellRoot {
  inline-size: 100%;
  display: flex;
  flex-direction: column;
  block-size: 100vh;
  /* Default sizing tokens for rail/panel widths */
  --shell-sidebar-rail-width: var(--space-9, 64px);
  --shell-sidebar-panel-width: 288px;
  --shell-sidebar-combined-width: calc(
    var(--shell-sidebar-rail-width) + var(--shell-sidebar-panel-width)
  );
  /* Overlay width hook - set by JS to one of the tokens above */
  --shell-overlay-width: auto;
}
@supports (height: 100dvh) {
  .rt-ShellRoot {
    block-size: 100dvh;
  }
}

/* Global Header (sticky) */
.rt-ShellHeader {
  position: sticky;
  top: 0;
  inset-inline: 0;
  z-index: var(--shell-z-header, 10);
  height: var(--shell-header-height, 64px);
  min-height: var(--shell-header-height, 64px);
  display: flex;
  align-items: center;
  background-color: var(--color-panel);
}

/* Body: sidebars + content arranged inline with overflow confined */
.rt-ShellBody {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  inline-size: 100%;
  flex: 1 1 auto;
  block-size: auto;
  min-block-size: 0;
  min-inline-size: 0;
  overflow: hidden;
}

/* Sidebar container (holds rail/panel or single-morph) */
.rt-ShellSidebar {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  block-size: 100%;
  min-block-size: 0;
}

/* Rail section (typically icon-sized navigation) */
.rt-ShellSidebarRail {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
  padding-block: var(--space-2);
  block-size: 100%;
  min-block-size: 0;
  overflow: hidden;
  /* Staggered animation: width first, then content fade */
  opacity: 0;
  transition:
    inline-size var(--motion-duration-small) var(--motion-ease-standard),
    opacity var(--motion-duration-small) var(--motion-ease-standard) var(--motion-duration-small);
}

/* Panel section (detail/inspector). Transitions its inline-size */
.rt-ShellSidebarPanel {
  display: block;
  /* Staggered animation: width first, then content fade */
  opacity: 0;
  transition:
    inline-size var(--motion-duration-small) var(--motion-ease-standard),
    opacity var(--motion-duration-small) var(--motion-ease-standard) var(--motion-duration-small);
  block-size: 100%;
  min-block-size: 0;
  overflow: hidden;
}

/* Single-markup morph container */
.rt-ShellSidebarSingle {
  /* Staggered animation: width first, then content fade */
  opacity: 0;
  transition:
    inline-size var(--motion-duration-small) var(--motion-ease-standard),
    opacity var(--motion-duration-small) var(--motion-ease-standard) var(--motion-duration-small);
  block-size: 100%;
  overflow: hidden;
}

/* Exit animation: fade out content first, then collapse width */
:where(.rt-ShellSidebarRail):not([data-visible]),
:where(.rt-ShellSidebarPanel):not([data-visible]),
:where(.rt-ShellSidebarSingle):not([data-visible]) {
  opacity: 0;
  /* Exit animation: fade out content first, then collapse width */
  transition:
    opacity var(--motion-duration-small) var(--motion-ease-standard),
    inline-size var(--motion-duration-small) var(--motion-ease-standard)
      var(--motion-duration-small);
}

/* When visible: show content after width settles */
[data-visible] {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .rt-ShellSidebarRail,
  .rt-ShellSidebarPanel,
  .rt-ShellSidebarSingle {
    transition: none;
  }
}

/* Content: the only scrollable area; min width protects content from collapsing */
.rt-ShellContent {
  flex: 1 1 auto;
  block-size: 100%;
  min-block-size: 0;
  min-inline-size: 0;
  overflow: auto;
}

/* Overlay mode: disable panel animation only (keep rail/sidebar transitions) */
:where(.rt-SheetContent) :where(.rt-ShellSidebarPanel) {
  transition: none !important;
}
