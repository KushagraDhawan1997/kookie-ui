/*
  Sidebar CSS (integration layer)
  - Depends on Base Menu tokens/behavior
  - Composes Sidebar container/layout + menu pieces
  - Adds layout variants (rail/panel), sizes, and visual variants
  - Non-breaking: organization and documentation only
*/

/* Imports: order matters â†’ base tokens, container/layout, then menu parts */
@import './_internal/base-menu.css';
@import './_internal/base-sidebar.css';
@import './_internal/base-sidebar-menu.css';

/*
  Layout-specific presentation
  - Rail layout: compact, icon-focused
  - Panel layout: full-width with text labels
  - Context-aware: works with Shell.Sidebar or standalone
*/

/* Rail Layout Styling */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarContent) {
  padding: var(--space-2);
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-BaseMenuViewport) {
  padding: var(--space-2) !important;
}

/* Enforce vertical stack and compact typography for all buttons in thin mode */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarContent) :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) {
  justify-content: center !important;
  align-items: center !important;
  flex-direction: column !important;
  gap: var(--space-1) !important;
  text-align: center !important;
  font-size: var(--font-size-0) !important;
  line-height: var(--line-height-0) !important;
  padding-top: var(--space-2) !important;
  padding-bottom: var(--space-2) !important;
  padding-left: var(--space-1) !important;
  padding-right: var(--space-1) !important;
}

/* Consolidated thin mode size blocks */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarContent.rt-r-size-1) {
  /* Horizontal padding tokens to free space for text */
  --base-menu-item-padding-left: var(--space-1) !important;
  --base-menu-item-padding-right: var(--space-1) !important;
  /* Unify vertical padding via tokens (used by BaseMenuItem) */
  --base-menu-item-padding-y: var(--space-2) !important;

  /* Override BaseMenu left padding resets */
  &:where(:not(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem))) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }
  &:where(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem)) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }

  /* Button and subtrigger layout */
  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) {
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: var(--space-1);
    text-align: center;
    font-size: var(--font-size-0);
    line-height: var(--line-height-0);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    min-width: 0;
  }

  /* Icon sizing */
  /* stylelint-disable-next-line selector-max-type */
  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) :where(svg) {
    width: var(--content-icon-size-3);
    height: var(--content-icon-size-3);
  }
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarContent.rt-r-size-2) {
  --base-menu-item-padding-left: var(--space-1) !important;
  --base-menu-item-padding-right: var(--space-1) !important;
  --base-menu-item-padding-y: var(--space-2) !important;

  &:where(:not(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem))) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }
  &:where(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem)) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }

  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) {
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: var(--space-1);
    text-align: center;
    font-size: var(--font-size-0);
    line-height: var(--line-height-0);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    min-width: 0;
  }

  /* stylelint-disable-next-line selector-max-type */
  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) :where(svg) {
    width: var(--content-icon-size-4);
    height: var(--content-icon-size-4);
  }
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarContent.rt-r-size-3) {
  --base-menu-item-padding-left: var(--space-1) !important;
  --base-menu-item-padding-right: var(--space-1) !important;
  --base-menu-item-padding-y: var(--space-2) !important;

  &:where(:not(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem))) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }
  &:where(:has(.rt-BaseMenuCheckboxItem, .rt-BaseMenuRadioItem)) {
    --base-menu-item-padding-left: var(--space-1) !important;
  }

  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) {
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: var(--space-1);
    text-align: center;
    font-size: var(--font-size-0);
    line-height: var(--line-height-0);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    min-width: 0;
  }

  /* stylelint-disable-next-line selector-max-type */
  :where(.rt-SidebarMenuButton, .rt-SidebarMenuSubTrigger) :where(svg) {
    width: var(--content-icon-size-5);
    height: var(--content-icon-size-5);
  }
}

/* Ellipsis on root child content when using asChild (e.g., Next.js Link) */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuButton > *) {
  display: flex;
  flex-direction: column;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  min-width: 0;
}

/* Ensure submenu trigger asChild containers also stack vertically */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubTrigger > *) {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  min-width: 0;
}

/* stylelint-disable-next-line selector-max-type */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuButton > * > svg) {
  flex-shrink: 0;
}

/* Ensure submenu anchors also truncate */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubContent .rt-SidebarMenuButton > *) {
  display: flex;
  flex-direction: column;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  min-width: 0;
}

/* Ensure icons remain visible at their token sizes in thin mode */
/* stylelint-disable-next-line selector-max-type */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuButton) :where(svg) {
  /* svg size is already controlled by tokens; this ensures layout stability */
  display: block;
}

/* Truncate labels inside an explicit label span */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuButton .rt-SidebarMenuLabel) {
  display: block;
  max-width: 100%;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: center;
  color: var(--accent-11);
  font-size: var(--font-size-0);
  line-height: var(--line-height-0);
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuBadge),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuShortcut),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-Badge),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-Kbd) {
  display: none !important;
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarGroupLabel) {
  display: none !important;
}

/* Hide submenu chevrons and flatten sublists in rail */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubTriggerIcon),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-BaseMenuSubTriggerIcon) {
  display: none !important;
}

:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubList),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-BaseMenuSubList) {
  padding-left: 0 !important;
  margin-left: 0 !important;
  border-left: 0 !important;
  border-top: 0 !important;
  border-bottom: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}

/* Also remove any decorative rule on the submenu list in thin mode */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubList::before),
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-BaseMenuSubList::before) {
  content: none !important;
  display: none !important;
}

/* Ensure the Accordion content wrapper doesn't add indentation */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubContent) {
  padding-left: 0 !important;
  margin-left: 0 !important;
  border-left: 0 !important;
  border-top: 1px solid var(--gray-a6) !important;
  border-bottom: 1px solid var(--gray-a6) !important;
  margin-top: var(--space-2) !important;
  margin-bottom: var(--space-2) !important;
  /* background-color: var(--accent-3); */
}

/* Remove vertical connector in thin mode */
/* (intentionally no ::before) */

/* Ensure submenu buttons also truncate */
:where(.rt-SidebarContainer[data-presentation='thin'] .rt-SidebarMenuSubContent .rt-SidebarMenuButton) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* Panel Layout Styling (default) - inherits existing styles */

/* Note: label styling omitted to avoid type-selector-specificity; use Text component for fine control */

/* Base variables and panel background support (mirrors Card pattern) */
.rt-SidebarContainer {
  --sidebar-border-width: 0px;
  --sidebar-side-border-width: 0px;
  --sidebar-background-color: transparent;
  --sidebar-border-color: var(--gray-6);
  transition: var(--transition-background-blur);
  background-color: var(--sidebar-background-color);

  /* Theme-level translucent override */
  :where([data-panel-background='translucent']) & {
    --sidebar-border-color: var(--gray-a6);
    backdrop-filter: var(--backdrop-filter-panel);
  }

  /* Component-level overrides */
  &:where([data-panel-background='solid']) {
    backdrop-filter: none;
    --backdrop-filter-panel: none;
  }
}

/* Centralized borders: apply a consistent inset border; avoid context coupling */
.rt-SidebarContainer {
  /* Vertical-only borders (left & right), no top/bottom */
  box-shadow:
    inset var(--sidebar-side-border-width) 0 0 0 var(--sidebar-border-color),
    inset calc(var(--sidebar-side-border-width) * -1) 0 0 0 var(--sidebar-border-color);
}

/* Container Variants (variables only) */
.rt-SidebarContainer:where(.rt-variant-outline) {
  --sidebar-border-width: 1px;
  --sidebar-side-border-width: 1px;
  --sidebar-background-color: transparent;
}

.rt-SidebarContainer:where(.rt-variant-ghost) {
  --sidebar-border-width: 0px;
  --sidebar-side-border-width: 0px;
  --sidebar-background-color: transparent;
}

.rt-SidebarContainer:where(.rt-variant-soft) {
  --sidebar-border-width: 0px;
  --sidebar-side-border-width: 0px;
  /* Base state: solid colors for solid panels */
  --sidebar-background-color: var(--gray-2);

  /* Theme-level translucent override */
  :where([data-panel-background='translucent']) & {
    --sidebar-background-color: color-mix(in srgb, var(--gray-a2), var(--gray-2) 60%);
  }
}

.rt-SidebarContainer:where(.rt-variant-surface) {
  --sidebar-border-width: 1px;
  --sidebar-side-border-width: 1px;
  /* Base state: neutral gray background */
  --sidebar-background-color: var(--gray-1);

  /* Theme-level translucent override */
  :where([data-panel-background='translucent']) & {
    --sidebar-background-color: color-mix(in srgb, var(--gray-a1), var(--gray-1) 60%);
  }
}

/* Header/Footer Layout Utilities */
.rt-SidebarHeader:where(.rt-SidebarHeader--container) {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: var(--space-2);
  padding: var(--sidebar-base-padding);
  min-height: var(--sidebar-item-height);

  /* Make MenuButtons expand to full width */
  & :where(.rt-SidebarMenuButton) {
    flex: 1;
  }
}

.rt-SidebarFooter:where(.rt-SidebarFooter--container) {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: var(--space-2);
  padding: var(--sidebar-base-padding);
  min-height: var(--sidebar-item-height);

  /* Make MenuButtons expand to full width */
  & :where(.rt-SidebarMenuButton) {
    flex: 1;
  }
}

/* Flex utilities for header/footer layouts */
.rt-SidebarHeader:where(.rt-flex-row) {
  flex-direction: row;
}
.rt-SidebarHeader:where(.rt-flex-col) {
  flex-direction: column;
}
.rt-SidebarHeader:where(.rt-items-center) {
  align-items: center;
}
.rt-SidebarHeader:where(.rt-items-start) {
  align-items: flex-start;
}
.rt-SidebarHeader:where(.rt-items-end) {
  align-items: flex-end;
}
.rt-SidebarHeader:where(.rt-justify-between) {
  justify-content: space-between;
}
.rt-SidebarHeader:where(.rt-justify-center) {
  justify-content: center;
}
.rt-SidebarHeader:where(.rt-justify-start) {
  justify-content: flex-start;
}
.rt-SidebarHeader:where(.rt-justify-end) {
  justify-content: flex-end;
}
.rt-SidebarHeader:where(.rt-gap-1) {
  gap: var(--space-1);
}
.rt-SidebarHeader:where(.rt-gap-2) {
  gap: var(--space-2);
}
.rt-SidebarHeader:where(.rt-gap-3) {
  gap: var(--space-3);
}
.rt-SidebarHeader:where(.rt-gap-4) {
  gap: var(--space-4);
}

.rt-SidebarFooter:where(.rt-flex-row) {
  flex-direction: row;
}
.rt-SidebarFooter:where(.rt-flex-col) {
  flex-direction: column;
}
.rt-SidebarFooter:where(.rt-items-center) {
  align-items: center;
}
.rt-SidebarFooter:where(.rt-items-start) {
  align-items: flex-start;
}
.rt-SidebarFooter:where(.rt-items-end) {
  align-items: flex-end;
}
.rt-SidebarFooter:where(.rt-justify-between) {
  justify-content: space-between;
}
.rt-SidebarFooter:where(.rt-justify-center) {
  justify-content: center;
}
.rt-SidebarFooter:where(.rt-justify-start) {
  justify-content: flex-start;
}
.rt-SidebarFooter:where(.rt-justify-end) {
  justify-content: flex-end;
}
.rt-SidebarFooter:where(.rt-gap-1) {
  gap: var(--space-1);
}
.rt-SidebarFooter:where(.rt-gap-2) {
  gap: var(--space-2);
}
.rt-SidebarFooter:where(.rt-gap-3) {
  gap: var(--space-3);
}
.rt-SidebarFooter:where(.rt-gap-4) {
  gap: var(--space-4);
}

/* Header/Footer Menu Button Support */
.rt-SidebarHeader :where(.rt-SidebarMenuButton),
.rt-SidebarFooter :where(.rt-SidebarMenuButton) {
  /* Inherit all base MenuButton styles */
  display: flex;
  align-items: center;
  gap: var(--space-2);
  min-height: var(--base-menu-item-height);
  padding-top: var(--base-menu-item-padding-y);
  padding-bottom: var(--base-menu-item-padding-y);
  padding-left: var(--base-menu-item-padding-left);
  padding-right: var(--base-menu-item-padding-right);
  box-sizing: border-box;
  position: relative;
  outline: none;
  background: none;
  border: none;
  width: 100%;
  text-align: left;
  cursor: var(--cursor-menu-item);
  user-select: none;

  /* Header/Footer-specific styling */
  justify-content: flex-start;

  /* Transitions */
  transition:
    background var(--motion-duration-small) var(--motion-ease-standard),
    box-shadow var(--motion-duration-small) var(--motion-ease-standard),
    filter var(--motion-duration-small) var(--motion-ease-standard);

  /* Focus state */
  &:where(:focus-visible) {
    outline: 2px solid var(--focus-8);
    outline-offset: 2px;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

.rt-SidebarHeader :where(.rt-SidebarMenuButton) {
  border-radius: var(--sidebar-base-border-radius) var(--sidebar-base-border-radius) 0 0;
}

.rt-SidebarFooter :where(.rt-SidebarMenuButton) {
  border-radius: 0 0 var(--sidebar-base-border-radius) var(--sidebar-base-border-radius);
}

/***************************************************************************************************
 *                                                                                                 *
 * SIZES                                                                                           *
 *                                                                                                 *
 ***************************************************************************************************/

@breakpoints {
  /* Container sizing - inherit from base menu */
  .rt-SidebarContainer {
    &:where(.rt-r-size-1) {
      --sidebar-base-padding: var(--space-3);
      --sidebar-item-height: var(--space-5);
    }
    &:where(.rt-r-size-2) {
      --sidebar-base-padding: var(--space-4);
      --sidebar-item-height: var(--space-6);
    }
  }

  /* Content sizing - use base menu tokens directly */
  .rt-SidebarContent {
    &:where(.rt-r-size-1) {
      --sidebar-content-padding: var(--base-menu-content-padding);
      --sidebar-item-padding-left: var(--base-menu-item-padding-left);
      --sidebar-item-padding-right: var(--base-menu-item-padding-right);
      --sidebar-item-padding-y: var(--base-menu-item-padding-y);
      --sidebar-item-height: var(--base-menu-item-height);
    }
    &:where(.rt-r-size-2) {
      --sidebar-content-padding: var(--base-menu-content-padding);
      --sidebar-item-padding-left: var(--base-menu-item-padding-left);
      --sidebar-item-padding-right: var(--base-menu-item-padding-right);
      --sidebar-item-padding-y: var(--base-menu-item-padding-y);
      --sidebar-item-height: var(--base-menu-item-height);
    }
  }

  /* Size-specific menu button styling - inherit from base menu */
  .rt-SidebarContent:where(.rt-r-size-1) {
    & :where(.rt-SidebarMenuButton) {
      gap: var(--component-gap-2);
      font-size: var(--font-size-1);
      line-height: var(--line-height-1);
      letter-spacing: var(--letter-spacing-1);
      border-radius: var(--radius-1);
      font-weight: var(--font-weight-regular);

      /* stylelint-disable-next-line selector-max-type */
      & :where(svg) {
        width: var(--content-icon-size-1);
        height: var(--content-icon-size-1);
        flex-shrink: 0;
      }
    }

    /* Sub-trigger icon sizing - matches base menu exactly */
    & :where(.rt-BaseMenuSubTriggerIcon) {
      width: var(--indicator-icon-size-1);
      height: var(--indicator-icon-size-1);
      flex-shrink: 0;
      margin-left: auto;
    }
  }

  .rt-SidebarContent:where(.rt-r-size-2) {
    & :where(.rt-SidebarMenuButton) {
      gap: var(--component-gap-3);
      font-size: var(--font-size-2);
      line-height: var(--line-height-2);
      letter-spacing: var(--letter-spacing-2);
      border-radius: var(--radius-2);
      font-weight: var(--font-weight-regular);

      /* stylelint-disable-next-line selector-max-type */
      & :where(svg) {
        width: var(--content-icon-size-2);
        height: var(--content-icon-size-2);
        flex-shrink: 0;
      }
    }

    /* Sub-trigger icon sizing - matches base menu exactly */
    & :where(.rt-BaseMenuSubTriggerIcon) {
      width: var(--indicator-icon-size-2);
      height: var(--indicator-icon-size-2);
      flex-shrink: 0;
      margin-left: auto;
    }
  }
}

/***************************************************************************************************
 *                                                                                                 *
 * MENU VARIANTS                                                                                   *
 *                                                                                                 *
 ***************************************************************************************************/

/* Menu Variant: Solid - EXACT match to base menu */
.rt-SidebarHeader:where(.rt-menu-variant-solid),
.rt-SidebarContent:where(.rt-menu-variant-solid),
.rt-SidebarFooter:where(.rt-menu-variant-solid) {
  /* Sub-trigger transitions - match base menu */
  & :where(.rt-SidebarMenuSubTrigger) {
    transition: var(--transition-menu);

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      transition: none;
    }

    /* Remove backdrop-filter transitions in translucent mode to prevent flickering */
    :where([data-panel-background='translucent']) & {
      transition:
        background var(--duration-1) var(--ease-1),
        color var(--duration-2) var(--ease-1);
    }
  }

  /* Sub-trigger open state - match base menu */
  & :where(.rt-SidebarMenuSubTrigger[data-state='open']) {
    /* Base state: solid gray for solid panels */
    background-color: var(--gray-3);

    /* Theme-level translucent override */
    :where([data-panel-background='translucent']) & {
      background-color: var(--gray-a3);
    }

    /* Component-level overrides (higher specificity) */
    &:where([data-panel-background='solid']) {
      background-color: var(--gray-3);
      backdrop-filter: none;
      --backdrop-filter-components: none;
    }

    &:where([data-panel-background='translucent']) {
      background-color: var(--gray-a3);
    }
  }

  /* Menu item transitions - match base menu */
  & :where(.rt-SidebarMenuButton) {
    /* Remove backdrop-filter transitions in translucent mode to prevent flickering */
    :where([data-panel-background='translucent']) & {
      transition:
        background var(--duration-1) var(--ease-1),
        color var(--duration-2) var(--ease-1);
    }
  }

  /* Hover/highlighted state for solid variant - EXACT match to base menu */
  & :where(.rt-SidebarMenuButton[data-highlighted]) {
    background-color: var(--accent-9);
    color: var(--accent-contrast);

    & :where(.rt-BaseMenuSubTriggerIcon) {
      color: var(--accent-contrast);
    }

    /* Force all text elements to inherit hover color, including those with color="gray" */
    & :where(.rt-Text) {
      color: inherit !important;
    }

    /* Also target any element with data-accent-color="gray" */
    & :where([data-accent-color='gray']:not(.rt-Badge)) {
      color: inherit !important;
    }

    /* FIX: Ensure badges maintain their own styling and don't inherit hover colors */
    & :where(.rt-Badge) {
      color: var(--accent-contrast) !important;
      background-color: var(--accent-12) !important;
    }
  }

  /* Active navigation state for solid variant - same as highlighted */
  & :where(.rt-SidebarMenuButton[data-active]) {
    background-color: var(--accent-9);
    color: var(--accent-contrast);
    font-weight: var(--font-weight-medium);

    /* Force all text elements to inherit active color */
    & :where(.rt-Text) {
      color: inherit !important;
    }

    & :where([data-accent-color='gray']:not(.rt-Badge)) {
      color: inherit !important;
    }

    /* FIX: Ensure badges maintain their own styling and don't inherit active colors */
    & :where(.rt-Badge) {
      color: var(--accent-contrast) !important;
      background-color: var(--accent-12) !important;
    }
  }

  /* High contrast support for solid variant - EXACT match to base menu */
  &:where(.rt-high-contrast) {
    & :where(.rt-SidebarMenuButton[data-highlighted]) {
      background-color: var(--accent-12);
      color: var(--accent-1);

      & :where(.rt-BaseMenuSubTriggerIcon) {
        color: var(--accent-1);
      }

      /* Force all text elements to inherit hover color in high contrast mode */
      & :where(.rt-Text) {
        color: inherit !important;
      }

      /* Also target any element with data-accent-color="gray" in high contrast */
      & :where([data-accent-color='gray']:not(.rt-Badge)) {
        color: inherit !important;
      }

      /* FIX: High contrast badge styling */
      & :where(.rt-Badge) {
        color: var(--accent-1) !important;
        background-color: var(--accent-9) !important;
      }

      &:where([data-accent-color]) {
        background-color: var(--accent-9);
        color: var(--accent-contrast);

        & :where(.rt-Text) {
          color: inherit !important;
        }

        & :where([data-accent-color='gray']:not(.rt-Badge)) {
          color: inherit !important;
        }

        & :where(.rt-Badge) {
          color: var(--accent-contrast) !important;
          background-color: var(--accent-12) !important;
        }
      }
    }

    & :where(.rt-SidebarMenuButton[data-active]) {
      background-color: var(--accent-12);
      color: var(--accent-1);
      font-weight: var(--font-weight-medium);

      & :where(.rt-Text) {
        color: inherit !important;
      }

      & :where([data-accent-color='gray']:not(.rt-Badge)) {
        color: inherit !important;
      }

      & :where(.rt-Badge) {
        color: var(--accent-1) !important;
        background-color: var(--accent-9) !important;
      }

      &:where([data-accent-color]) {
        background-color: var(--accent-9);
        color: var(--accent-contrast);

        & :where(.rt-Text) {
          color: inherit !important;
        }

        & :where([data-accent-color='gray']:not(.rt-Badge)) {
          color: inherit !important;
        }

        & :where(.rt-Badge) {
          color: var(--accent-contrast) !important;
          background-color: var(--accent-12) !important;
        }
      }
    }
  }
}

/* Menu Variant: Soft - EXACT match to base menu */
.rt-SidebarHeader:where(.rt-menu-variant-soft),
.rt-SidebarContent:where(.rt-menu-variant-soft),
.rt-SidebarFooter:where(.rt-menu-variant-soft) {
  /* Sub-trigger transitions - match base menu */
  & :where(.rt-SidebarMenuSubTrigger) {
    transition: var(--transition-menu);

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      transition: none;
    }

    /* Remove backdrop-filter transitions in translucent mode to prevent flickering */
    :where([data-panel-background='translucent']) & {
      transition:
        background var(--duration-1) var(--ease-1),
        color var(--duration-2) var(--ease-1);
    }
  }

  /* Sub-trigger open state - match base menu */
  & :where(.rt-SidebarMenuSubTrigger[data-state='open']) {
    /* Base state: solid accent for solid panels */
    background-color: var(--accent-3);

    /* Theme-level translucent override */
    :where([data-panel-background='translucent']) & {
      background-color: var(--accent-a3);
    }

    /* Component-level overrides (higher specificity) */
    &:where([data-panel-background='solid']) {
      background-color: var(--accent-3);
      backdrop-filter: none;
      --backdrop-filter-components: none;
    }

    &:where([data-panel-background='translucent']) {
      background-color: var(--accent-a3);
    }
  }

  /* Menu item transitions - match base menu */
  & :where(.rt-SidebarMenuButton) {
    /* Remove backdrop-filter transitions in translucent mode to prevent flickering */
    :where([data-panel-background='translucent']) & {
      transition:
        background var(--duration-1) var(--ease-1),
        color var(--duration-2) var(--ease-1);
    }
  }

  /* Hover/highlighted state for soft variant - EXACT match to base menu */
  & :where(.rt-SidebarMenuButton[data-highlighted]) {
    /* Base state: solid accent for solid panels */
    background-color: var(--accent-4);

    /* Theme-level translucent override */
    :where([data-panel-background='translucent']) & {
      background-color: var(--accent-a4);
    }

    /* Component-level overrides (higher specificity) */
    &:where([data-panel-background='solid']) {
      background-color: var(--accent-4);
      backdrop-filter: none;
      --backdrop-filter-components: none;
    }

    &:where([data-panel-background='translucent']) {
      background-color: var(--accent-a4);
    }

    /* In soft variant, improve contrast for gray text while maintaining hierarchy */
    & :where(.rt-Text[data-accent-color='gray'], [data-accent-color='gray']:not(.rt-Badge)) {
      color: var(--gray-11) !important;
    }
  }

  /* Active navigation state for soft variant - use accent-3 like sub-trigger */
  & :where(.rt-SidebarMenuButton[data-active]) {
    /* Base state: solid accent for solid panels */
    background-color: var(--accent-3);
    color: var(--accent-12);
    font-weight: var(--font-weight-medium);

    /* Theme-level translucent override */
    :where([data-panel-background='translucent']) & {
      background-color: var(--accent-a3);
      color: var(--accent-a12);
    }

    /* Component-level overrides (higher specificity) */
    &:where([data-panel-background='solid']) {
      background-color: var(--accent-3);
      color: var(--accent-12);
      backdrop-filter: none;
      --backdrop-filter-components: none;
    }

    &:where([data-panel-background='translucent']) {
      background-color: var(--accent-a3);
      color: var(--accent-a12);
    }

    /* In soft variant, improve contrast for gray text while maintaining hierarchy */
    & :where(.rt-Text[data-accent-color='gray'], [data-accent-color='gray']:not(.rt-Badge)) {
      color: var(--gray-11) !important;
    }
  }
}

/* Removed old icon-only collapsed mode rules in favor of Shell rail mode */
